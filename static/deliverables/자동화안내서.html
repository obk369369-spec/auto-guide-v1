<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>자동화 안내서 v1.0</title>
  <style>
    body { font-family: "Noto Sans KR", sans-serif; background:#fafafa; color:#111; margin:0; padding:20px;}
    h1 { font-size:1.6em; font-weight:700; }
    .card { background:white; border-radius:20px; box-shadow:0 0 10px rgba(0,0,0,0.08); padding:20px; margin-top:15px;}
    .log { background:#f5f5f5; border-radius:10px; padding:10px; font-size:0.9em; height:150px; overflow-y:auto;}
    button { background:#005eff; color:white; border:none; padding:10px 18px; border-radius:8px; cursor:pointer; }
    button:hover { background:#0040c1; }
  </style>
</head>
<body>
  <h1>⚙️ WIC 자동화 안내서 (v1.0)</h1>
  <div class="card">
    <p>이 도구는 사용자의 기록 기반으로 자동화 구조를 작동시키는 핵심 안내 모듈입니다.</p>
    <button id="start">자동화 시작</button>
    <div class="log" id="log"></div>
  </div>

  <script type="module">
    import { syncGuide } from "/ops/export_latest.ts";

    const logBox = document.getElementById("log");
    const writeLog = (msg) => {
      const t = new Date().toLocaleTimeString();
      logBox.innerHTML += `[${t}] ${msg}<br>`;
      logBox.scrollTop = logBox.scrollHeight;
    };

    document.getElementById("start").addEventListener("click", async () => {
      writeLog("Trigger → Observe → Lock-in → Propagate → Sync 시작");
      const userIntent = {
        goal: "사용자 기록 기반 자동화 안내서 완전 실행",
        mode: "self-propagating",
        origin: "wic-auto-tools",
        date: new Date().toISOString()
      };
      writeLog("사용자 의도 로드 완료");
      const result = await syncGuide(userIntent);
      writeLog(result.status);
    });
  </script>
</body>
</html>
